#!/usr/bin/env python2.7

import os
import time
import difflib
from datetime import datetime

import click
import Levenshtein as lev
from sqlalchemy import create_engine
from git import Repo
from wand.image import Image, FILTER_TYPES
from wand.color import Color

from latexsnapshots.server import run_server
from latexsnapshots.util import proc_latex



if __name__ == '__main__':
  from config import *
  @click.command()
  @click.argument("cmd", nargs=1)
  @click.option("-h", type=int, default=350, help="screenshot height")
  @click.option("--port", type=int, default=8000, help="webserver port")
  def main(cmd, h, port):
    """
    This executable loads config.py for the configuration parameters
    Commands:

      screenshot -- regenerate screenshots
      latex      -- run latex and generate pdfs
      server     -- run webserver for nice UI
    """

    if cmd == "screenshot":
      all_screenshots(os.path.abspath("versions"), h=h)
    elif cmd == "latex":
      proc_latex()
    elif cmd == 'server':
      run_server('localhost', port)

  main()
